@using Blazored.LocalStorage
@using ASBDDS.Shared.Models.Responses
@inject ILocalStorageService _localStorageService

<MudPaper Width="250px" Class="d-inline-flex py-3" Square="true">
    <MudNavMenu Class="mud-width-full">
        <MudText Typo="Typo.h6" Class="px-4">@_userName</MudText>
        <MudText Typo="Typo.body2" Class="px-4 mud-text-secondary">Authorized</MudText>
        <MudDivider Class="my-2" />
        @*<MudNavLink Href="#" Icon="@Icons.Filled.Dashboard">Dashboard</MudNavLink>*@
        <MudNavLink Href="../" Icon="@Icons.Filled.SupervisorAccount">User Panel</MudNavLink>
        <MudNavGroup Title="Settings" Icon="@Icons.Filled.Settings" Expanded="false">
            <MudNavLink Href="users" Icon="@Icons.Filled.People" IconColor="Color.Success">Users</MudNavLink>
            <MudNavLink Href="projects" Icon="@Icons.Filled.TableView" IconColor="Color.Success">Projects</MudNavLink>
            <MudNavLink Href="bootable-images" Icon="@Icons.Filled.DesktopWindows" IconColor="Color.Success">Bootable images</MudNavLink>
        </MudNavGroup>
        <MudNavGroup Title="Hardware" Icon="@Icons.Filled.Hardware" Expanded="false">
            <MudNavLink Href="devices" Icon="@Icons.Filled.Devices" IconColor="Color.Warning">Devices</MudNavLink>
            <MudNavLink Href="switches" Icon="@Icons.Filled.SettingsEthernet" IconColor="Color.Warning">Switches</MudNavLink>
            <MudNavLink Href="consoles" Icon="@Icons.Filled.Window" IconColor="Color.Warning">Consoles</MudNavLink>
            @*<MudNavLink Href="routers" Icon="@Icons.Filled.Router" IconColor="Color.Warning">Routers</MudNavLink>*@
        </MudNavGroup>
        <MudNavGroup Title="DHCP" Icon="@Icons.Rounded.SettingsApplications" Expanded="false">
            <MudNavLink Href="leases" Icon="@Icons.Filled.AppSettingsAlt" IconColor="Color.Warning">Leases</MudNavLink>
        </MudNavGroup>
        <MudNavLink Href="../swagger" Target="_blank" Icon="@Icons.Filled.Book">Swagger</MudNavLink>
    </MudNavMenu>
</MudPaper>

@code{

    private TokenResponse _tokenResponse;
    private string _userName;

    protected override async Task OnInitializedAsync()
    {
        _tokenResponse = await _localStorageService.GetItemAsync<TokenResponse>("TokenResponse");
        _userName = _tokenResponse.UserName;
    }

}
