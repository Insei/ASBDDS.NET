@using Blazored.LocalStorage
@using ASBDDS.Shared.Models.Responses
@inject ILocalStorageService _localStorageService

<MudPaper Width="250px" Class="d-inline-flex py-3" Square="true">
    <MudNavMenu Class="mud-width-full">
        <MudText Typo="Typo.h6" Class="px-4">@_userName</MudText>
        <MudText Typo="Typo.body2" Class="px-4 mud-text-secondary">Authorized</MudText>
        <MudDivider Class="my-2" />
        <AuthorizeView Roles="Admin">
                <Authorized>
                    <MudNavLink Href="admin" Icon="@Icons.Filled.AdminPanelSettings">Admin Panel</MudNavLink>
                </Authorized>
        </AuthorizeView>
        @* <MudNavLink Href="#" Icon="@Icons.Filled.Dashboard">Dashboard</MudNavLink> *@
        <MudNavLink Href="devices/rents" Icon="@Icons.Filled.DevicesOther">Devices</MudNavLink>
        @* <MudNavGroup Title="Settings" Icon="@Icons.Filled.Settings" Expanded="false"> *@
        @*     <MudNavLink Href="users" Icon="@Icons.Filled.People" IconColor="Color.Success">User</MudNavLink> *@
        @*     <MudNavLink Href="projects" Icon="@Icons.Filled.TableView" IconColor="Color.Success">Projects</MudNavLink> *@
        @* </MudNavGroup> *@
        <MudNavLink Href="apikeys" Icon="@Icons.Filled.VpnKey">API Keys</MudNavLink>
        <MudNavLink Href="swagger" Target="_blank" Icon="@Icons.Filled.Book">Swagger</MudNavLink>
    </MudNavMenu>
</MudPaper>

@code{

    private TokenResponse _tokenResponse;
    private string _userName;

    protected override async Task OnInitializedAsync()
    {
        _tokenResponse = await _localStorageService.GetItemAsync<TokenResponse>("TokenResponse");
        _userName = _tokenResponse.UserName;
    }

}